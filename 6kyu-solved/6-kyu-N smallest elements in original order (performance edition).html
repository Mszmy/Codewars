<!DOCTYPE html>
<html lang="zh-cn">
<head>
	<meta charset="utf-8" />
	<title>N smallest elements in original order (performance edition)</title>
 	<script type="text/javascript">
  /*
  You will be given an array of integers, very few of which are unique, and a number `n`. You have to extract `n` smallest elements out of the array **preserving their original order**.
  */
 		function performantSmallest(arr, n) {
  			let d = Array(arr.length+1).fill(0);
  			console.log(d);
  			for(let x of arr) d[x]++;
  			console.log(d);

 			let s = 0;
  			for(let i = 0; i < d.length; ++i) {
    			if(s < n) {
     			s += d[i];
      			if(s > n) d[i] -= s - n;
    			} else {
      				d[i] = 0;
   				}
  			}
  			let r = [];
  			for(let x of arr)
    			if(d[x] > 0) {
      				d[x]--;
      				r.push(x);
      				if(r.length == n) break;
    			}
 			return r;
		}
 		
		// 验证
		// console.log(performantSmallest([1,2,3,4,5],3));//[1,2,3]
		console.log(performantSmallest([5,4,3,2,1],3));//[3,2,1]

	</script>
</head>
<body>
</body>	
</html>
